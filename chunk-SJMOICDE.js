import{I as c,a as o,b as l,da as m,ea as u,qb as n}from"./chunk-YC37UFRF.js";var d=class a{users=m([{id:"USER_1",firstname:"Admin",lastname:"Admin",name:"Admin",company:"CELLAR EXCHANGE",email:"addmin@cellarexchange.com",phone:"+33 6 00 00 00 01",password:"admin",role:"ADMIN",label:"Administrateur"},{id:"USER_2",firstname:"Jean",lastname:"Dupont",name:"Jean Dupont",company:"Courtier A",email:"jean.dupont@domain.com",phone:"+33 6 12 34 56 78",password:"user123",role:"VENDEUR",label:"Vendeur"},{id:"USER_3",firstname:"Marie",lastname:"Martin",name:"Marie Martin",company:"N\xE9gociant A",email:"marie.client@import.com",phone:"+33 6 98 76 54 32",password:"user123",role:"ACHETEUR",label:"Acheteur"}]);currentUser=m(null);constructor(){let e=localStorage.getItem("wine_user");e&&this.currentUser.set(JSON.parse(e)),u(()=>{let r=this.currentUser();r?localStorage.setItem("wine_user",JSON.stringify(r)):localStorage.removeItem("wine_user")})}loginAs(e){let r=this.users().find(s=>s.role===e);r&&this.currentUser.set(r)}logout(){this.currentUser.set(null)}addUser(e){let r=e.role==="VENDEUR"?"Vendeur":e.role==="ACHETEUR"?"Acheteur":"Admin",s=`USER_${this.users().length+1+Math.floor(Math.random()*1e3)}`,i=l(o({},e),{id:s,label:r,name:`${e.firstname} ${e.lastname}`});this.users.update(t=>[...t,i])}updateUser(e){let r=e.role==="VENDEUR"?"Vendeur":e.role==="ACHETEUR"?"Acheteur":"Admin",s=l(o({},e),{label:r,name:`${e.firstname} ${e.lastname}`});this.users.update(i=>i.map(t=>t.id===e.id?s:t))}deleteUser(e){this.users.update(r=>r.filter(s=>s.id!==e))}isAdmin=n(()=>this.currentUser()?.role==="ADMIN");isSeller=n(()=>this.currentUser()?.role==="VENDEUR");isBuyer=n(()=>this.currentUser()?.role==="ACHETEUR");static \u0275fac=function(r){return new(r||a)};static \u0275prov=c({token:a,factory:a.\u0275fac,providedIn:"root"})};export{d as a};
