import{a as R,b as O,c as A,h as z}from"./chunk-PGYA3KEG.js";import{a as P}from"./chunk-HYBWPIHC.js";import{$a as d,Ab as j,Bb as H,Da as k,Ma as V,N as S,Na as D,Pa as U,Qa as L,Ra as w,S as m,Sa as e,T as c,Ta as i,U as u,Ua as g,V as f,Ya as C,Za as x,a as E,b as M,da as v,db as T,eb as r,fb as I,gb as h,hb as W,ib as y,jb as b,kb as _,mb as N,sa as a}from"./chunk-7VJJJVXK.js";var G=(p,l,n)=>({"bg-purple-50 text-purple-700 border-purple-100":p,"bg-indigo-50 text-indigo-700 border-indigo-100":l,"bg-blue-50 text-blue-700 border-blue-100":n}),F=(p,l)=>l.id;function q(p,l){if(p&1){let n=C();e(0,"tr",14)(1,"td",16)(2,"div",17),r(3),i(),e(4,"div",18),r(5),i()(),e(6,"td",16)(7,"span",19),r(8),i()(),e(9,"td",16)(10,"div",20)(11,"div",21),u(),e(12,"svg",22),g(13,"path",23),i(),r(14),i(),f(),e(15,"div",24),u(),e(16,"svg",25),g(17,"path",26),i(),r(18," \u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022 "),i()()(),f(),e(19,"td",27)(20,"div",28)(21,"button",29),x("click",function(){let t=m(n).$implicit,o=d();return c(o.openEditModal(t))}),u(),e(22,"svg",5),g(23,"path",30),i()(),f(),e(24,"button",31),x("click",function(){let t=m(n).$implicit,o=d();return c(o.deleteUser(t.id))}),u(),e(25,"svg",5),g(26,"path",32),i()()()()()}if(p&2){let n,s,t=l.$implicit,o=d();a(3),W("",t.firstname," ",t.lastname),a(2),I(t.company),a(2),w("ngClass",N(9,G,t.role==="ADMIN",t.role==="VENDEUR",t.role==="ACHETEUR")),a(),h(" ",t.label," "),a(6),h(" ",t.email," "),a(10),T("opacity-0",t.id===((n=o.auth.currentUser())==null?null:n.id)),w("disabled",t.id===((s=o.auth.currentUser())==null?null:s.id))}}function J(p,l){if(p&1){let n=C();e(0,"div",15)(1,"div",33)(2,"div",34)(3,"div")(4,"h2",2),r(5),i(),e(6,"p",35),r(7),i()(),e(8,"button",36),x("click",function(){m(n);let t=d();return c(t.closeModal())}),u(),e(9,"svg",37),g(10,"path",38),i()()(),f(),e(11,"div",39)(12,"div",40)(13,"div",41)(14,"h3",42)(15,"span",43),u(),e(16,"svg",44),g(17,"path",45),i()(),r(18," Profil & R\xF4le "),i(),f(),e(19,"div",46)(20,"button",47),x("click",function(){m(n);let t=d();return c(t.formData.role="VENDEUR")}),e(21,"div",48),r(22,"VENDEUR"),i(),e(23,"div",49),r(24,"G\xE8re son stock"),i()(),e(25,"button",47),x("click",function(){m(n);let t=d();return c(t.formData.role="ACHETEUR")}),e(26,"div",48),r(27,"ACHETEUR"),i(),e(28,"div",49),r(29,"Acc\xE8s march\xE9"),i()()(),e(30,"div",50)(31,"div",51)(32,"div")(33,"label",52),r(34,"Pr\xE9nom"),i(),e(35,"input",53),_("ngModelChange",function(t){m(n);let o=d();return b(o.formData.firstname,t)||(o.formData.firstname=t),c(t)}),i()(),e(36,"div")(37,"label",52),r(38,"Nom"),i(),e(39,"input",54),_("ngModelChange",function(t){m(n);let o=d();return b(o.formData.lastname,t)||(o.formData.lastname=t),c(t)}),i()()(),e(40,"div")(41,"label",52),r(42,"Soci\xE9t\xE9"),i(),e(43,"input",55),_("ngModelChange",function(t){m(n);let o=d();return b(o.formData.company,t)||(o.formData.company=t),c(t)}),i()()()(),e(44,"div",56)(45,"h3",42)(46,"span",43),u(),e(47,"svg",44),g(48,"path",57),i()(),r(49," Acc\xE8s & Contact "),i(),f(),e(50,"div",50)(51,"div")(52,"label",52),r(53,"Email (Identifiant)"),i(),e(54,"input",58),_("ngModelChange",function(t){m(n);let o=d();return b(o.formData.email,t)||(o.formData.email=t),c(t)}),i()(),e(55,"div")(56,"label",52),r(57,"Mot de passe"),i(),e(58,"div",59)(59,"input",60),_("ngModelChange",function(t){m(n);let o=d();return b(o.formData.password,t)||(o.formData.password=t),c(t)}),i()(),e(60,"p",61),r(61),i()(),e(62,"div")(63,"label",52),r(64,"T\xE9l\xE9phone (Optionnel)"),i(),e(65,"input",62),_("ngModelChange",function(t){m(n);let o=d();return b(o.formData.phone,t)||(o.formData.phone=t),c(t)}),i()()()()()(),e(66,"div",63)(67,"button",64),x("click",function(){m(n);let t=d();return c(t.closeModal())}),r(68,"Annuler"),i(),e(69,"button",65),x("click",function(){m(n);let t=d();return c(t.saveUser())}),r(70),i()()()()}if(p&2){let n=d();a(5),h(" ",n.editingId()?"Modifier l'utilisateur":"Nouvel Utilisateur"," "),a(2),h(" ",n.editingId()?"Mise \xE0 jour des informations":"Cr\xE9ation d'un compte partenaire"," "),a(13),w("ngClass",n.formData.role==="VENDEUR"?"border-indigo-600 bg-indigo-50 text-indigo-700 shadow-sm":"border-gray-200 bg-white text-gray-400 hover:border-gray-300 hover:bg-gray-50"),a(5),w("ngClass",n.formData.role==="ACHETEUR"?"border-slate-900 bg-slate-50 text-slate-900 shadow-sm":"border-gray-200 bg-white text-gray-400 hover:border-gray-300 hover:bg-gray-50"),a(10),y("ngModel",n.formData.firstname),a(4),y("ngModel",n.formData.lastname),a(4),y("ngModel",n.formData.company),a(11),y("ngModel",n.formData.email),a(5),y("ngModel",n.formData.password),a(2),h(" ",n.editingId()?"Laisser tel quel ou modifier pour r\xE9initialiser.":"Sera modifi\xE9 \xE0 la premi\xE8re connexion."," "),a(4),y("ngModel",n.formData.phone),a(5),h(" ",n.editingId()?"Enregistrer les modifications":"Cr\xE9er l'utilisateur"," ")}}var B=class p{auth=S(P);isModalOpen=v(!1);editingId=v(null);formData={firstname:"",lastname:"",company:"",email:"",phone:"",password:"",role:"VENDEUR"};openCreateModal(){this.formData={firstname:"",lastname:"",company:"",email:"",phone:"",password:"",role:"VENDEUR"},this.editingId.set(null),this.isModalOpen.set(!0)}openEditModal(l){this.formData={firstname:l.firstname,lastname:l.lastname,company:l.company,email:l.email,phone:l.phone,password:l.password,role:l.role},this.editingId.set(l.id),this.isModalOpen.set(!0)}closeModal(){this.isModalOpen.set(!1)}saveUser(){if(!this.formData.firstname||!this.formData.lastname||!this.formData.company){alert("Champs manquants");return}this.editingId()?this.auth.updateUser(M(E({},this.formData),{id:this.editingId(),label:"",name:""})):this.auth.addUser(this.formData),this.closeModal()}deleteUser(l){confirm("Supprimer cet utilisateur ?")&&this.auth.deleteUser(l)}static \u0275fac=function(n){return new(n||p)};static \u0275cmp=k({type:p,selectors:[["app-users-list"]],decls:28,vars:1,consts:[[1,"flex","flex-col","h-full","bg-white","relative"],[1,"px-6","py-5","border-b","border-gray-200","flex","justify-between","items-center","bg-white"],[1,"text-xl","font-bold","text-slate-900"],[1,"text-xs","text-gray-500","mt-1"],[1,"px-4","py-2","bg-slate-900","hover:bg-slate-800","text-white","text-sm","font-bold","rounded-lg","shadow-sm","flex","items-center","gap-2","transition-all",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"flex-1","overflow-auto","bg-gray-50","p-6"],[1,"bg-white","border","border-gray-200","rounded-xl","shadow-sm","overflow-hidden"],[1,"w-full","text-left","text-sm","text-gray-600"],[1,"bg-gray-50/50","text-[10px]","uppercase","font-bold","text-gray-400","tracking-wider"],[1,"px-6","py-4","border-b","border-gray-100"],[1,"px-6","py-4","border-b","border-gray-100","text-right"],[1,"divide-y","divide-gray-50"],[1,"hover:bg-gray-50/80","transition-colors","group"],[1,"fixed","inset-0","z-50","bg-slate-900/40","backdrop-blur-sm","flex","items-center","justify-center","p-4","animate-fade-in"],[1,"px-6","py-4"],[1,"font-bold","text-slate-900"],[1,"text-xs","text-gray-400"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-[10px]","font-bold","uppercase","tracking-wide","border",3,"ngClass"],[1,"flex","flex-col","gap-1.5"],[1,"flex","items-center","gap-2","text-xs","font-medium","text-slate-700"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-3.5","h-3.5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"],[1,"flex","items-center","gap-2","text-xs","text-gray-400"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-3.5","h-3.5","text-gray-300"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"],[1,"px-6","py-4","text-right"],[1,"flex","items-center","justify-end","gap-2"],["title","Modifier",1,"text-gray-300","hover:text-slate-900","p-2","hover:bg-gray-100","rounded-full","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"],["title","Supprimer",1,"text-gray-300","hover:text-red-600","p-2","hover:bg-red-50","rounded-full","transition-colors",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"bg-white","rounded-2xl","shadow-2xl","w-full","max-w-4xl","overflow-hidden","animate-scale-in","flex","flex-col","max-h-[90vh]"],[1,"px-8","py-5","border-b","border-gray-100","flex","justify-between","items-center","bg-white","shrink-0"],[1,"text-xs","text-gray-500","mt-0.5"],[1,"p-2","-mr-2","text-gray-400","hover:text-slate-900","rounded-full","hover:bg-gray-100","transition-all",3,"click"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-8","overflow-y-auto"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-10"],[1,"space-y-6"],[1,"text-xs","font-bold","text-gray-400","uppercase","tracking-widest","mb-4","flex","items-center","gap-2"],[1,"w-6","h-6","rounded-full","bg-gray-100","text-gray-500","flex","items-center","justify-center"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-3.5","h-3.5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"grid","grid-cols-2","gap-3"],["type","button",1,"p-4","rounded-xl","border-2","flex","flex-col","items-center","gap-1","transition-all","duration-200",3,"click","ngClass"],[1,"font-bold","text-sm"],[1,"text-[10px]","opacity-80","uppercase","tracking-wide"],[1,"space-y-4"],[1,"grid","grid-cols-2","gap-4"],[1,"block","text-xs","font-bold","text-gray-700","mb-1.5","ml-1"],["type","text","placeholder","Jean",1,"w-full","px-4","py-2.5","bg-gray-50","border","border-gray-200","rounded-lg","text-sm","text-slate-900","placeholder-gray-400","focus:outline-none","focus:bg-white","focus:border-slate-500","focus:ring-1","focus:ring-slate-500","transition-all",3,"ngModelChange","ngModel"],["type","text","placeholder","Dupont",1,"w-full","px-4","py-2.5","bg-gray-50","border","border-gray-200","rounded-lg","text-sm","text-slate-900","placeholder-gray-400","focus:outline-none","focus:bg-white","focus:border-slate-500","focus:ring-1","focus:ring-slate-500","transition-all",3,"ngModelChange","ngModel"],["type","text","placeholder","Ex: Domaine du Vin",1,"w-full","px-4","py-2.5","bg-gray-50","border","border-gray-200","rounded-lg","text-sm","text-slate-900","placeholder-gray-400","focus:outline-none","focus:bg-white","focus:border-slate-500","focus:ring-1","focus:ring-slate-500","transition-all",3,"ngModelChange","ngModel"],[1,"space-y-6","md:border-l","md:border-gray-100","md:pl-10"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"],["type","email",1,"w-full","px-4","py-2.5","bg-gray-50","border","border-gray-200","rounded-lg","text-sm","text-slate-900","placeholder-gray-400","focus:outline-none","focus:bg-white","focus:border-slate-500","focus:ring-1","focus:ring-slate-500","transition-all",3,"ngModelChange","ngModel"],[1,"relative","group"],["type","text",1,"w-full","pl-4","pr-10","py-2.5","bg-gray-50","border","border-gray-200","rounded-lg","text-sm","font-mono","text-slate-900","placeholder-gray-400","focus:outline-none","focus:bg-white","focus:border-slate-500","focus:ring-1","focus:ring-slate-500","transition-all",3,"ngModelChange","ngModel"],[1,"text-[10px]","text-gray-400","mt-1.5","ml-1"],["type","tel",1,"w-full","px-4","py-2.5","bg-gray-50","border","border-gray-200","rounded-lg","text-sm","text-slate-900","placeholder-gray-400","focus:outline-none","focus:bg-white","focus:border-slate-500","focus:ring-1","focus:ring-slate-500","transition-all",3,"ngModelChange","ngModel"],[1,"px-8","py-5","bg-gray-50","border-t","border-gray-100","flex","justify-end","gap-3","shrink-0"],[1,"px-6","py-2.5","text-sm","font-bold","text-gray-500","hover:text-slate-900","hover:bg-gray-100","rounded-lg","transition-colors",3,"click"],[1,"px-8","py-2.5","text-sm","font-bold","text-white","bg-slate-900","hover:bg-slate-800","rounded-lg","shadow-lg","shadow-slate-900/20","transition-all","transform","hover:-translate-y-0.5",3,"click"]],template:function(n,s){n&1&&(e(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),r(4,"Utilisateurs"),i(),e(5,"p",3),r(6,"G\xE9rez les acc\xE8s et identifiants de la plateforme."),i()(),e(7,"button",4),x("click",function(){return s.openCreateModal()}),u(),e(8,"svg",5),g(9,"path",6),i(),r(10," Nouvel utilisateur "),i()(),f(),e(11,"div",7)(12,"div",8)(13,"table",9)(14,"thead",10)(15,"tr")(16,"th",11),r(17,"Utilisateur"),i(),e(18,"th",11),r(19,"R\xF4le"),i(),e(20,"th",11),r(21,"Identifiants"),i(),e(22,"th",12),r(23,"Actions"),i()()(),e(24,"tbody",13),U(25,q,27,13,"tr",14,F),i()()()(),V(27,J,71,12,"div",15),i()),n&2&&(a(25),L(s.auth.users()),a(2),D(s.isModalOpen()?27:-1))},dependencies:[H,j,z,R,O,A],styles:[".animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .2s ease-out forwards}.animate-scale-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_scaleIn .2s cubic-bezier(.16,1,.3,1) forwards}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_scaleIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}"]})};export{B as UsersListComponent};
